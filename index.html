<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Volerx | زينة رمضان</title>

<style>
:root{
  --black:#111;
  --white:#ffffff;
  --gold:#c9a24d;
  --blue:#0a1f44;
  --bg:#fafafa;
  --card:#ffffff;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--black);
}

/* ===== Banner ===== */
.banner{
  height:190px;
  background:
    linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
    url("https://i.postimg.cc/9FR514MS/38CF47CD-3735-4111-8683-B0AC11C51C59.png")
    center/cover no-repeat;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:white;
}

.banner h1{
  margin:0;
  font-size:38px;
  letter-spacing:3px;
}

.brand-line{
  width:100px;
  height:3px;
  margin-top:14px;
  background:linear-gradient(to right,var(--gold),var(--blue));
  border-radius:10px;
}

/* ===== Loader ===== */
#loader{
  text-align:center;
  padding:50px;
  font-size:18px;
}

/* ===== Grid ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:18px;
  padding:20px;
}

/* ===== Card ===== */
.card{
  background:var(--card);
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
  cursor:pointer;
  transition:.3s;
}

.card:hover{
  transform:translateY(-6px);
}

/* ===== Categories ===== */
#categories .card{
  background:linear-gradient(to bottom,#fff,#fdfbf6);
  border:1px solid rgba(201,162,77,.25);
}

/* ===== Slider ===== */
.slider{
  position:relative;
  height:160px;
  overflow:hidden;
}

.slider img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  animation:fade 9s infinite;
}

.slider img:nth-child(1){animation-delay:0s}
.slider img:nth-child(2){animation-delay:3s}
.slider img:nth-child(3){animation-delay:6s}

@keyframes fade{
  0%{opacity:0}
  10%{opacity:1}
  30%{opacity:1}
  40%{opacity:0}
  100%{opacity:0}
}

/* ===== Product ===== */
.card img{
  width:100%;
  height:190px;
  object-fit:cover;
}

.info{
  padding:14px;
  text-align:center;
}

.info h3{
  margin:0;
  font-size:15px;
}

.price{
  margin-top:6px;
  color:var(--gold);
  font-weight:bold;
}

.btn{
  display:block;
  margin-top:12px;
  padding:9px;
  background:var(--blue);
  color:white;
  text-decoration:none;
  border-radius:10px;
  font-size:14px;
}

/* ===== Utility ===== */
.hidden{display:none}

/* ===== Lightbox ===== */
#lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}

#lightbox img{
  max-width:90%;
  max-height:90%;
}
</style>
</head>

<body>

<div class="banner">
  <h1>Volerx</h1>
  <div class="brand-line"></div>
</div>

<div id="loader">⏳ جاري تحميل المنتجات...</div>

<div id="categories" class="grid hidden"></div>
<div id="products" class="grid hidden"></div>

<div id="lightbox" class="hidden" onclick="closeImg()">
  <img id="bigImg">
</div>

<script>
const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTlN-9WaF9E7jxo836CniVtu6NG1BFJONmi34JAibeRyo1WXtuaW0fpoPz5Ntv8s4eUfmrKIq22CRlS/pub?gid=1564525727&single=true&output=csv";

const loader = document.getElementById("loader");
const categoriesEl = document.getElementById("categories");
const productsEl = document.getElementById("products");
const lightbox = document.getElementById("lightbox");
const bigImg = document.getElementById("bigImg");

let products = [];
let categories = {};

/* ===== Fetch & Prepare ===== */
fetch(SHEET_URL)
.then(res => res.text())
.then(text => {
  const rows = text.trim().split("\n").map(r => r.split(","));
  const headers = rows.shift();

  rows.forEach(r=>{
    let p = {};
    headers.forEach((h,i)=>p[h.trim()] = r[i]);
    if(!p["اسم المنتج"]) return;

    products.push(p);

    const cat = p["القسم"].trim();
    if(!categories[cat]) categories[cat] = [];
    categories[cat].push(p);
  });

  loader.classList.add("hidden");
  renderCategories();
})
.catch(()=>{
  loader.innerText="❌ فشل تحميل البيانات";
});

/* ===== Render Categories ===== */
function renderCategories(){
  categoriesEl.innerHTML="";
  categoriesEl.classList.remove("hidden");
  productsEl.classList.add("hidden");

  Object.keys(categories).forEach(cat=>{
    const imgs = categories[cat].slice(0,3).map(p=>p["رابط الصورة"]);

    const card = document.createElement("div");
    card.className = "card";
    card.onclick = ()=> openCategory(cat);

    card.innerHTML = `
      <div class="slider">
        ${imgs.map(i=>`<img src="${i}">`).join("")}
      </div>
      <div class="info"><h3>${cat}</h3></div>
    `;

    categoriesEl.appendChild(card);
  });
}

/* ===== Open Category ===== */
function openCategory(cat){
  productsEl.innerHTML="";
  categoriesEl.classList.add("hidden");
  productsEl.classList.remove("hidden");

  categories[cat].forEach(p=>{
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <img src="${p["رابط الصورة"]}">
      <div class="info">
        <h3>${p["اسم المنتج"]}</h3>
        <div class="price">${p["السعر"]} ₪</div>
        <a class="btn" target="_blank"
           href="https://wa.me/XXXXXXXXXX?text=أرغب بشراء ${p["اسم المنتج"]}">
           طلب عبر واتساب
        </a>
      </div>
    `;
    div.querySelector("img").onclick = ()=> openImg(p["رابط الصورة"]);
    productsEl.appendChild(div);
  });
}

/* ===== Lightbox ===== */
function openImg(src){
  bigImg.src = src;
  lightbox.classList.remove("hidden");
}
function closeImg(){
  lightbox.classList.add("hidden");
}
bigImg.onclick = e => e.stopPropagation();
</script>

</body>
</html>

